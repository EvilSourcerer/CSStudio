/*!
 * drag-tracker v1.0.0
 * https://github.com/Sphinxxxx/drag-tracker#readme
 *
 * Copyright 2017-2018 Andreas Borgen
 * Released under the MIT license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dragTracker=e()}(this,function(){"use strict";var t=window;return function(e){var n=Element.prototype;n.matches||(n.matches=n.msMatchesSelector||n.webkitMatchesSelector),n.closest||(n.closest=function(t){var e=this;do{if(e.matches(t))return e;e="svg"===e.tagName?e.parentNode:e.parentElement}while(e);return null});var o=(e=e||{}).container||document.documentElement,a=e.selector,r=e.callback||console.log,c=e.callbackDragStart,u=e.callbackDragEnd,i=e.callbackClick,s=e.propagateEvents,l=!1!==e.roundCoords,f=!1!==e.dragOutside,d=e.handleOffset||!1!==e.handleOffset,g=null;switch(d){case"center":g=!0;break;case"topleft":case"top-left":g=!1}var h=void 0;function m(t,e,n,a){var r=t.clientX,c=t.clientY;function u(t,e,n){return Math.max(e,Math.min(t,n))}if(e){var i=e.getBoundingClientRect();r-=i.left,c-=i.top,n&&(r-=n[0],c-=n[1]),a&&(r=u(r,0,i.width),c=u(c,0,i.height)),e!==o&&(null!==g?g:"circle"===e.nodeName||"ellipse"===e.nodeName)&&(r-=i.width/2,c-=i.height/2)}return l?[Math.round(r),Math.round(c)]:[r,c]}function p(t){t.preventDefault(),s||t.stopPropagation()}function v(t){var e=void 0;if(e=a?a instanceof Element?a.contains(t.target)?a:null:t.target.closest(a):{}){p(t);var n=a&&d?m(t,e):[0,0],r=m(t,o,n);h={target:e,mouseOffset:n,startPos:r,actuallyDragged:!1},c&&c(e,r)}}function b(t){if(h){p(t);var e=h.startPos,n=m(t,o,h.mouseOffset,!f);h.actuallyDragged=h.actuallyDragged||e[0]!==n[0]||e[1]!==n[1],r(h.target,n,e)}}function w(t,e){if(h){if(u||i){var n=!h.actuallyDragged,a=n?h.startPos:m(t,o,h.mouseOffset,!f);i&&n&&!e&&i(h.target,a),u&&u(h.target,a,h.startPos,e||n&&i)}h=null}}function D(t,e){w(P(t),e)}function k(t,e,n){t.addEventListener(e,n)}function y(t){return void 0!==t.buttons?1===t.buttons:1===t.which}function E(t,e){1===t.touches.length?e(P(t)):w(t,!0)}function P(t){var e=t.targetTouches[0];return e||(e=t.changedTouches[0]),e.preventDefault=t.preventDefault.bind(t),e.stopPropagation=t.stopPropagation.bind(t),e}k(o,"mousedown",function(t){y(t)?v(t):w(t,!0)}),k(o,"touchstart",function(t){return E(t,v)}),k(t,"mousemove",function(t){h&&(y(t)?b(t):w(t))}),k(t,"touchmove",function(t){return E(t,b)}),k(o,"mouseup",function(t){h&&!y(t)&&w(t)}),k(o,"touchend",function(t){return D(t)}),k(o,"touchcancel",function(t){return D(t,!0)})}});